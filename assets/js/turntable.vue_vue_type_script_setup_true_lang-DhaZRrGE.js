import{g as G,L as O,h as Y,j as d,D as B,o as c,U as ie,v as n,x as N,H as V,Q as _,P as r,O as re,V as pe,r as ue,F as K,k as y,C as ce,u,W as de,w as D,t as fe,X as me,Y as ve,R as I,f as U,A as ge}from"./vendor-B6k3fvGC.js";import{c as xe,_ as M}from"./index.vue_vue_type_script_setup_true_lang-DBlEJXtx.js";import{u as we,f as he,e as be,h as ye,i as _e,c as ke}from"./index-BACsONiP.js";function A(){let o=window;return(o==null?void 0:o._tw_)||(o==null?void 0:o.main)}function Ce(){return new Promise(o=>{var a,t,s;if(window.WKWebViewJavascriptBridge)return o(window.WKWebViewJavascriptBridge);if(window.WKWVJBCallbacks)return window.WKWVJBCallbacks.push(o);window.WKWVJBCallbacks=[o],(s=(t=(a=window.webkit)==null?void 0:a.messageHandlers)==null?void 0:t.iOS_Native_InjectJavascript)==null||s.postMessage(null)})}function q(o,...a){return new Promise(async(t,s)=>{try{(await Ce()).callHandler("iosJSAPI",{method:o,data:a},f=>t(f))}catch(l){s(l)}})}async function it(o=0){var t,s,l,f;let a=window;return(t=A())!=null&&t.getDeviceInfo?(console.log("androidGlobal()?.getDeviceInfo"),JSON.parse(((s=A())==null?void 0:s.getDeviceInfo(o))||"null")):(f=(l=a==null?void 0:a.webkit)==null?void 0:l.messageHandlers)!=null&&f.iOS_Native_InjectJavascript?(console.log("w?.webkit?.messageHandlers?.iOS_Native_InjectJavascript"),await q("getDeviceInfo",String(o))):null}async function ze(){var a,t,s,l;let o=window;return(a=o==null?void 0:o.main)!=null&&a.openMarket?(t=o==null?void 0:o.main)==null||t.openMarket("0xeb51d9a39ad5eef215dc0bf39a8821ff804a0f01","polygon"):(l=(s=o==null?void 0:o.webkit)==null?void 0:s.messageHandlers)!=null&&l.iOS_Native_InjectJavascript&&(console.log("w?.webkit?.messageHandlers?.iOS_Native_InjectJavascript"),await q("routeTo","native://meme.tracker.com/kline/index?token=0xeb51d9a39ad5eef215dc0bf39a8821ff804a0f01&chain=polygon")),null}const Le=""+new URL("../png/download-bg-CL2bsEKk.png",import.meta.url).href,De=""+new URL("../png/download-bg-en-B3sLTKWS.png",import.meta.url).href,Ue=""+new URL("../png/invitation-img-mrMMXAAx.png",import.meta.url).href,Te=""+new URL("../png/invitation-img-en-DBNKeFql.png",import.meta.url).href,X=""+new URL("../png/win-prize-img-Dj3Z0rHi.png",import.meta.url).href,Se=""+new URL("../png/win-btn-CS4ZgX7G.png",import.meta.url).href,Re=""+new URL("../png/win-btn-en-BqjhUy-B.png",import.meta.url).href,Ie=""+new URL("../png/go-trade-DzK7okxs.png",import.meta.url).href,Me=""+new URL("../png/go-trade-en-Bmsol1JM.png",import.meta.url).href,Be=["src"],Ee=["src"],We=["innerHTML"],Fe=["innerHTML"],$e=G({__name:"index",props:{type:{},visible:{type:Boolean}},emits:["close"],setup(o,{emit:a}){const t=o,s=a,{locale:l,t:f}=O(),m=Y(()=>({fail:{title:f("home.lotteryThankYou"),messageClass:l.value==="zh"?"mt-9.7px":"mt-21px",message:f("home.lotteryNoWin"),icon:new URL(""+new URL("../png/fail-icon-8uoycX49.png",import.meta.url).href,import.meta.url).href,bgClass:"linear-gradient(180deg, #ED432D 0%, #FFFEFC 100%)",titleClass:l.value==="zh"?"text-33px":"text-24px",buttonText:f("home.lotteryExtraChance"),btnClass:"#ED412B"},retry:{title:f("home.lotteryIncreaseChance"),messageClass:l.value==="zh"?"mt-9.7px":"mt-21px",message:f("home.lotteryMoreChances"),icon:new URL(""+new URL("../png/retry-icon-ssB9EyC1.png",import.meta.url).href,import.meta.url).href,bgClass:"linear-gradient(180deg, #ED432D 0%, #FFFEFC 100%)",titleClass:l.value==="zh"?"text-33px":"text-24px",buttonText:"",btnClass:""}})[t.type]||{});return(k,v)=>t.visible?(c(),d("div",{key:0,style:{background:"rgba(0, 0, 0, 0.9)"},class:"fixed inset-0 flex items-center justify-center z-50",onTouchmove:v[2]||(v[2]=ie(()=>{},["prevent"])),onClick:v[3]||(v[3]=C=>s("close"))},[n("div",null,[n("div",{style:N([{width:"calc(100vw - 55px)"},{background:m.value.bgClass}]),class:"box-border rounded-24px px-32px pt-75px pb-44px relative text-center shadow-xl"},[t.type==="fail"?(c(),d("img",{key:0,src:m.value.icon,alt:"图片",class:"w-140px h-108.7px absolute -top-50px left-1/2 -translate-x-1/2"},null,8,Be)):B("",!0),t.type==="retry"?(c(),d("img",{key:1,src:m.value.icon,alt:"图片",class:"w-128px h-120px absolute -top-60px left-1/2 -translate-x-1/2"},null,8,Ee)):B("",!0),n("div",{class:V(["font-semibold text-[#470400]",m.value.titleClass])},_(m.value.title),3),n("div",{class:V(["mb-27px text-[#470400] text-14px",m.value.messageClass]),innerHTML:m.value.message},null,10,We),n("div",{class:"w-full py-10px px-5 text-14px rounded-full text-white box-border",style:N({background:m.value.btnClass}),onClick:v[0]||(v[0]=C=>s("close")),innerHTML:m.value.buttonText},null,12,Fe)],4),n("img",{class:"w-40px h-40px block mx-auto mt-38px",onClick:v[1]||(v[1]=C=>s("close")),src:xe,alt:""})])],32)):B("",!0)}}),He={class:"flex flex-center justify-center relative"},Pe={class:"flex items-center mb-3px"},je={class:"text-[#FFEF72] text-14px"},Je={class:"text-white ml-8px text-12px"},Ne={class:"text-[#00FFB0] text-14px font-semibold"},Ve={class:"pt-10px text-center"},Ke=["innerHTML"],Ae=["innerHTML"],Xe={class:"pt-32px text-center"},Ge={class:"relative w-full h-117px rounded-22px mb-41px",style:{background:"linear-gradient(93deg, #000 1.61%, #363636 93.78%)"}},Oe={class:"text-13px text-white px-24px py-24px text-left"},Ye=["innerHTML"],qe={class:"text-23px font-semibold text-[#ED4732] mt-5px"},Qe={class:"py-25px"},Ze=["innerHTML"],et={class:"mt-11px mb-43px rounded-6px box-border",style:{border:"0.5px solid #ed442e"}},tt={class:"text-center"},nt={key:0,class:"text-5 text-[#310600]"},ot={key:1,class:"text-6 text-[#4D0C03]"},rt=G({__name:"turntable",setup(o){const{locale:a,t}=O(),s=we(),l=r(null),f=r(!1),m=r("fail"),k=r(!1),v=r(!1),C=r([]),T=r([]),z=r(!1),h=r(""),x=r(0),E=r(0),S=r(0),W=r(!1),L=r(0),F=r(),R=r(!1),Q=r({offsetDegree:0}),Z=[{padding:"14px"},{padding:"6.5px",background:"#ED412B"},{padding:"12px",background:"#fff"},{background:"#DD0706"}],$=r([{background:"#DD0706",imgs:[{src:new URL(""+new URL("../png/prize-img-6-CswxU4ou.png",import.meta.url).href,import.meta.url).href,width:"14vw",height:"14vw",top:"7vw"}],fonts:[{text:"0.5USDT",fontColor:"#fff",fontSize:"14px",fontWeight:700,top:"2.5vw"}]},{background:"#EF5440",imgs:[{src:new URL(""+new URL("../png/prize-img-5-DpzGxebu.png",import.meta.url).href,import.meta.url).href,width:"13vw",height:"12vw",top:"8vw"}],fonts:[{text:"1USDT",fontColor:"#fff",fontSize:"14px",fontWeight:700,top:"3vw"}]},{background:"#DD0706",imgs:[{src:new URL(""+new URL("../png/prize-img-4-BFrMEbb1.png",import.meta.url).href,import.meta.url).href,width:"13vw",height:"12vw",top:"8vw"}],fonts:[{text:"5USDT",fontColor:"#fff",fontSize:"14px",fontWeight:700,top:"3vw"}]},{background:"#EF5440",imgs:[{src:new URL(""+new URL("../png/prize-img-3-DyEbKkXe.png",import.meta.url).href,import.meta.url).href,width:"13vw",height:"12vw",top:"8vw"}],fonts:[{text:"10USDT",fontColor:"#fff",fontSize:"14px",fontWeight:700,top:"3vw"}]},{background:"#DD0706",imgs:[{src:new URL(""+new URL("../png/prize-img-1-DB1elzXb.png",import.meta.url).href,import.meta.url).href,width:"10vw",height:"12vw",top:"8vw"}],fonts:[{text:"200USDT",fontColor:"#fff",fontSize:"14px",fontWeight:700,top:"2.5vw"}]},{background:"#EF5440",imgs:[{src:new URL(""+new URL("../png/prize-img-2-BlSXkTaf.png",import.meta.url).href,import.meta.url).href,width:"9vw",height:"11vw",top:"9vw"}],fonts:[{text:"500USDT",fontColor:"#fff",fontSize:"14px",fontWeight:700,top:"2.5vw"}]}]),H=r({background:"#FE1148",imgs:[{src:new URL(""+new URL("../png/iphone-img-DlRQopk6.png",import.meta.url).href,import.meta.url).href,width:"11vw",height:"11vw",top:"9vw"}],fonts:[{text:"iPhone 17 Pro max",fontColor:"#fff",fontSize:"12px",fontWeight:700,top:"2.8vw",lengthLimit:110}]}),ee={background:"#EF5440",imgs:[{src:new URL(""+new URL("../png/fail-prize-Dll3rLHw.png",import.meta.url).href,import.meta.url).href,width:"14vw",height:"14vw",top:"6vw"}]},te=Y(()=>[{radius:"45vw",fonts:[{text:a.value==="zh"?`  还剩${s.accountData.remaining_draws}次`:`  ${s.accountData.remaining_draws}chance`,top:"11%",fontColor:"#fff",fontSize:"12px",fontWeight:400}],imgs:[{src:a.value==="zh"?new URL(""+new URL("../png/prize-draw-Bp2FYMXw.png",import.meta.url).href,import.meta.url).href:new URL(""+new URL("../png/prize-draw-en-B4WaU9XU.png",import.meta.url).href,import.meta.url).href,top:"-55%",width:"50vw",height:"50vw"}]}]),b=r([]),ne=async()=>{if(s.userInfo.address){if(s.accountData.remaining_draws<=0){R.value=!0;return}l.value.play();try{const i=await be({wallet_address:s.userInfo.address,project_name:"origin"});if(x.value=i.data.prize_type,E.value=i.data.amount,W.value=!1,i.data.is_big_prize){const e=b.value.findIndex(g=>{var p,w;return((w=(p=g==null?void 0:g.fonts)==null?void 0:p[0])==null?void 0:w.text)===H.value.fonts[0].text});l.value.stop(e),W.value=!0;return}if(x.value===2||x.value===3)l.value.stop(0);else{const e=b.value.findIndex(g=>{var p,w;return((w=(p=g==null?void 0:g.fonts)==null?void 0:p[0])==null?void 0:w.text)===`${E.value}USDT`});e!==-1&&l.value.stop(e)}}catch(i){console.log(i),l.value.stop(0),U.error(t("home.lotteryError"))}}},oe=async()=>{W.value?k.value=!0:((x.value===0||x.value===1)&&U({message:t("home.lotteryWinPrize",{value:E.value}),type:"success"}),x.value===2&&(f.value=!0,m.value="fail"),x.value===3&&(f.value=!0,m.value="retry")),s.setAccountData()},P=()=>{window.location.href="https://doc.ave.ai/cn/events/ave.aix-ao-la-ding-xing-yun-zhuan-pan-huo-dong"},j=()=>{s.userInfo.address&&(z.value=!z.value,h.value="")},se=async()=>{try{if(!h.value)return U({type:"warning",message:t("home.lotteryInputInviteCode")});await ye({project_name:"origin",wallet_address:s.userInfo.address,ref_code:h.value,device_id:s.userInfo.device_id}),await s.setAccountData(),h.value="",z.value=!1,U({type:"success",message:t("home.lotteryVerificationSuccess")})}catch(i){console.log(i),U({type:"error",message:i.msg||t("home.lotteryClaimError")})}},ae=async()=>{const i=await _e({project_name:"origin"});T.value=i.data.length>0?[i.data[L.value]]:[],i.data.length>1&&(F.value=setInterval(()=>{L.value++,L.value>i.data.length-1&&(L.value=0),T.value=[i.data[L.value]]},3e3))},J=()=>{ze(),R.value=!1},le=async()=>{const i=await ke({project_name:"origin"});C.value=i.data.prize,b.value.push({...ee}),S.value=0,C.value.forEach(e=>{e===1500?b.value.push({...H.value}):($.value[S.value].fonts[0].text=`${e}USDT`,b.value.push({...$.value[S.value]}),S.value++)}),await ge(),l.value.init()};return re(async()=>{var i;!s.isInit&&((i=window.bot_wallet)==null?void 0:i.walletType)==2&&(console.log("获取抽奖资格弹框"),s.isInit=!0,v.value=!0),ae(),await le()}),pe(()=>{F.value&&clearInterval(F.value)}),(i,e)=>{const g=ue("el-scrollbar");return c(),d(K,null,[n("div",He,[y(u(de),{ref_key:"myLucky",ref:l,width:"100vw",height:"100vw",prizes:b.value,blocks:Z,buttons:te.value,"default-config":Q.value,onStart:ne,onEnd:oe},null,8,["prizes","buttons","default-config"]),T.value.length>0?(c(),ce(g,{key:0,"max-height":"100px",class:"absolute bottom-[-35px] left-15px z-9 max-h-120px"},{default:D(()=>[(c(!0),d(K,null,fe(T.value,(p,w)=>(c(),d("div",{key:w,class:"bg-[#000000] opacity-80 rounded-100px last:mb-0 mb-10px px-21px py-6px"},[n("div",Pe,[n("div",je,_(u(he)(p.wallet_address)),1),n("div",Je,_(u(t)("home.lotteryWin")),1)]),n("div",Ne,_(p.amount)+"USDT",1)]))),128))]),_:1})):B("",!0),n("div",null,[u(a)==="zh"?(c(),d("img",{key:0,onClick:P,class:"absolute bottom-[-20px] right-0 w-87px z-9 block",src:Le,alt:""})):(c(),d("img",{key:1,onClick:P,class:"absolute bottom-[-20px] right-0 w-87px z-9 block",src:De,alt:""}))]),n("div",null,[u(a)==="zh"?(c(),d("img",{key:0,onClick:j,class:"absolute bottom-[-20px] left-15px w-161px z-9 block",src:Ue,alt:""})):(c(),d("img",{key:1,onClick:j,class:"absolute bottom-[-20px] left-15px w-161px z-9 block",src:Te,alt:""}))])]),y($e,{type:m.value,visible:f.value,onClose:e[0]||(e[0]=p=>f.value=!1)},null,8,["type","visible"]),y(M,{visible:k.value,title:u(t)("home.winPrize"),type:1,close:"bottom",onClose:e[1]||(e[1]=p=>k.value=!1)},{default:D(()=>[n("div",Ve,[e[8]||(e[8]=n("img",{class:"w-179px h-261px",src:X,alt:""},null,-1)),n("div",{class:"text-20px text-[#292322] mt-28px mb-5px font-semibold",innerHTML:u(t)("home.winPrizeTips")},null,8,Ke),n("div",{class:"text-23px text-[#ED4732] font-semibold",innerHTML:u(t)("home.winPrizeAmount")},null,8,Ae)])]),_:1},8,["visible","title"]),y(M,{visible:v.value,title:u(t)("home.winPrize"),type:2,close:"top",onClose:e[4]||(e[4]=p=>v.value=!1)},{default:D(()=>[n("div",Xe,[n("div",Ge,[n("div",Oe,[n("div",{class:"w-75%",innerHTML:u(t)("home.winPrizeTips2")},null,8,Ye),n("div",qe,_(u(t)("home.winPrizeAmount2")),1)]),e[9]||(e[9]=n("img",{class:"w-108px h-157px absolute right-[-20px] -bottom-8px",src:X,alt:""},null,-1))]),u(a)==="zh"?(c(),d("img",{key:0,class:"w-full mb-[-6px]",onClick:e[2]||(e[2]=p=>v.value=!1),src:Se,alt:""})):(c(),d("img",{key:1,class:"w-full mb-[-6px]",onClick:e[3]||(e[3]=p=>v.value=!1),src:Re,alt:""}))])]),_:1},8,["visible","title"]),y(M,{visible:z.value,title:u(t)("home.inviteCode"),close:"top",onClose:e[6]||(e[6]=p=>z.value=!1)},{default:D(()=>[n("div",Qe,[n("div",{class:"text-14px text-white",innerHTML:u(t)("home.inviteCodeTips")},null,8,Ze),n("div",et,[me(n("input",{"onUpdate:modelValue":e[5]||(e[5]=p=>h.value=p),class:"text-23px w-full text-[#ED4732] font-semibold rounded-6px border-none px-19px py-14px box-border",type:"text"},null,512),[[ve,h.value]])]),n("div",{onClick:se,class:"w-[90%] mx-auto text-center text-20px font-medium rounded-100px text-white py-10px",style:{background:"linear-gradient(90deg, #fc3c1b 0%, #ed4530 100%)"}},_(u(t)("home.inviteBtnTips")),1)])]),_:1},8,["visible","title"]),y(M,{visible:R.value,type:3,close:"top",onClose:e[7]||(e[7]=p=>R.value=!1)},{default:D(()=>[n("div",tt,[u(a)==="zh"?(c(),d("div",nt,e[10]||(e[10]=[I(" 交易 "),n("span",{class:"font-bold"},"$LGNS",-1),I(" 获得更多抽奖次数 ")]))):(c(),d("div",ot,e[11]||(e[11]=[I(" Trade "),n("span",{class:"font-bold"},"$LGNS",-1),I(" to get more lottery draws ")]))),u(a)==="zh"?(c(),d("img",{key:2,class:"w-full mb-[-6px] mt-13px",onClick:J,src:Ie,alt:""})):(c(),d("img",{key:3,class:"w-full mb-[-6px] mt-13px",onClick:J,src:Me,alt:""}))])]),_:1},8,["visible"])],64)}}});export{rt as _,it as g};
